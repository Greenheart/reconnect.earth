import{n as Z,d as k,t as C,f as H,j as re,k as J}from"../chunks/Bd_c04z5.js";import"../chunks/dyReTsNA.js";import{al as ne,am as se,an as le,K as ce,D as U,p as fe,P as de,C as me,t as ue,U as pe,R as B,E as D,Q as R,G as F,W as m,T as b,g as t,f as $,V as y,a as ve,ag as ee,aj as M,$ as E}from"../chunks/C_FyWWOe.js";import{i as G,c as xe}from"../chunks/DNbTHXjI.js";import{r as te,p as he,a as O}from"../chunks/FdrhjgrE.js";import{i as N,c as we,o as ge,f as _e,a as be,b as ye,T as ke,d as Se,B as V,L as Le,X as Ee,r as Ie,e as Ae}from"../chunks/Cs3k_oaD.js";import{d as ae,e as oe,f as ie,g as Te,L as je,M as Me,h as Ne,r as Pe,b as W,i as Re,I as q,j as K,k as Ce}from"../chunks/wqey1z9g.js";import{s as z}from"../chunks/CZLBvm7U.js";import{b as X}from"../chunks/qaLLkHbj.js";import{g as Q}from"../chunks/Ba_q6E1Y.js";import{b as Y}from"../chunks/DvgBTh_J.js";function Be(l,e,a){U&&fe();var r=l,o=pe,n,d=ne()?se:le;ce(()=>{d(o,o=e())&&(n&&de(n),n=me(()=>a(r)))}),U&&(r=ue)}var Oe=Z('<svg><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M10.5 19.5L3 12m0 0l7.5-7.5M3 12h18"></path></svg>');function Ve(l,e){const a=te(e,["$$slots","$$events","$$legacy"]);var r=Oe();let o;B(()=>o=ae(r,o,{viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...a})),k(l,r)}var We=Z('<svg><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M13.5 4.5L21 12m0 0l-7.5 7.5M21 12H3"></path></svg>');function Xe(l,e){const a=te(e,["$$slots","$$events","$$legacy"]);var r=We();let o;B(()=>o=ae(r,o,{viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...a})),k(l,r)}var ze=C('<h2><!> </h2> <p class="whitespace-pre-wrap pt-2 text-sm 2xs:text-base xs:text-lg"> </p>',1);function De(l,e){D(e,!0);var a=ze(),r=R(a),o=b(r);Be(o,()=>e.reflectionStep,v=>{var L=H(),g=R(L);{var x=u=>{var _=H();const I=$(()=>je[e.reflectionStep.i]);var s=R(_);xe(s,()=>t(I),(c,h)=>{h(c,{get class(){return`size-6 -mb-0.5 ${Te[e.reflectionStep.i].text??""}`}})}),k(u,_)};G(g,u=>{N(e.reflectionStep)&&u(x)})}k(v,L)});var n=m(o);y(r);var d=m(r,2),S=b(d,!0);y(d),B(v=>{ie(r,1,v),z(n,` ${e.reflectionStep.title??""}`),z(S,e.reflectionStep.text)},[()=>oe(["flex items-center justify-center gap-2 text-lg font-normal normal-case xs:text-2xl sm:text-3xl",N(e.reflectionStep)?e.reflectionStep.colors.text:"text-emerald-400"])]),k(l,a),F()}let j=Me,P=Ne,Fe=1;var Ge=(l,e)=>{l.key.includes("Arrow")&&e()},He=(l,e)=>e(),Ue=C('<span></span> <div role="tooltip" id="tooltip" class="absolute left-0 top-0 hidden max-w-max rounded-md bg-black px-2 py-1.5 text-sm"> <div class="arrow absolute h-2 w-2 rotate-45 bg-black"></div></div> <input type="range" aria-describedby="tooltip"> <span></span>',1),qe=C('<div class="slider flex h-4 w-full min-w-[160px] max-w-md select-none items-center gap-4 px-4 text-lg xs:h-6 xs:text-xl"><!></div>');function Ke(l,e){D(e,!0);let a=he(e,"lifewheel",15),r=M(void 0),o=M(void 0),n=M(void 0);const d=s=>(s-j)*100/(P-j),S=s=>{t(r)&&t(o)&&t(n)&&we(t(r),t(o),{placement:"top",middleware:[ge(18),_e(),be({element:t(n)})]}).then(({x:c,y:h,placement:w,middlewareData:A})=>{if(!(t(r)&&t(o)&&t(n)))return;const T=t(r).offsetWidth-32;t(o).style.transform=`translate(${c-T/2+T*d(s)/100}px, ${h}px)`;const{x:i,y:p}=A.arrow,f={top:"bottom",right:"left",bottom:"top",left:"right"}[w.split("-")[0]];Object.assign(t(n).style,{left:i!==null?`${i}px`:"",top:p!==null?`${p}px`:"",right:"",bottom:"",[f]:"-4px"})})};let v;const L=()=>{window.clearTimeout(v),t(o)&&(t(o).style.display="block"),S(a()[e.reflectionStep.i])},g=(s=400)=>{v=window.setTimeout(()=>{t(o)&&(t(o).style.display="")},s)},x=()=>{L(),g()};ve(()=>{S(a()[e.reflectionStep.i])});var u=qe();J("keydown",ee.body,s=>{const c=document.activeElement?.className.includes("input");c&&s.key.includes("Arrow")?x():!c&&N(e.reflectionStep)&&(s.key==="ArrowDown"?(a(a()[e.reflectionStep.i]=Math.max(j,a()[e.reflectionStep.i]-1),!0),x()):s.key==="ArrowUp"&&(a(a()[e.reflectionStep.i]=Math.min(P,a()[e.reflectionStep.i]+1),!0),x()))});var _=b(u);{var I=s=>{var c=Ue(),h=R(c);h.textContent=j;var w=m(h,2),A=b(w),T=m(A);X(T,f=>E(n,f),()=>t(n)),y(w),X(w,f=>E(o,f),()=>t(o));var i=m(w,2);Pe(i),W(i,"min",j),W(i,"max",P),W(i,"step",Fe),i.__keydown=[Ge,x],i.__pointerdown=L,i.__pointerup=[He,g],X(i,f=>E(r,f),()=>t(r));var p=m(i,2);p.textContent=P,B(f=>{z(A,`${a()[e.reflectionStep.i]??""} `),ie(i,1,oe(["input-slider h-4 min-w-[160px] flex-1 cursor-ew-resize touch-pan-x rounded-full bg-stone-800 bg-gradient-to-br bg-no-repeat shadow-sm",e.reflectionStep.colors.from,e.reflectionStep.colors.to])),Re(i,f)},[()=>`background-size: ${d(a()[e.reflectionStep.i])}% 100%`]),ye(i,()=>a()[e.reflectionStep.i],f=>a(a()[e.reflectionStep.i]=f,!0)),k(s,c)};G(_,s=>{N(e.reflectionStep)&&s(I)})}y(u),k(l,u),F()}re(["keydown","pointerdown","pointerup"]);var Qe=C('<div class="max-h-[calc(100vh-4rem)] mx-auto grid max-w-screen-md grid-rows-[min-content_1fr_min-content_min-content] justify-items-center gap-4 sm:gap-8"><!> <!> <div class="flex max-w-lg flex-grow flex-col items-center justify-end px-4"><div class="h-40 2xs:h-48 xs:h-52"><!></div></div> <!> <div class="flex w-full min-w-[160px] max-w-md justify-between px-4 pb-4"><!> <div class="flex-grow"></div> <!></div></div>');function Ye(l,e){D(e,!0);let a=M(O(q));const r=ke.of(()=>q,{duration:400,easing:Se});let o=M(0),n=$(()=>K[t(o)]);const d=()=>t(o)>=1,S=()=>{d()&&E(o,t(o)-1)},v=async()=>{t(o)===K.length-1?(Ie.add(Ae(t(a))),await Q(Y)):(E(o,t(o)+1),N(t(n))&&t(a)[t(n).i]===0&&E(a,O(t(a).map((i,p)=>p===t(n).i?Ce:i))))};async function L(){confirm("Are you sure you want to abort this reflection and lose your progress?")&&await Q(Y)}var g=Qe();J("keyup",ee.body,i=>{document.activeElement?.className?.includes("input-slider")||(i.key==="ArrowLeft"?d()&&S():i.key==="ArrowRight"&&v())});var x=b(g);V(x,{onclick:L,"aria-label":"Abort reflection and go back to main menu",class:"!h-12 !w-12 !border-emerald-400/5 absolute top-4 right-4",variant:"roundGhost",children:(i,p)=>{Ee(i,{})},$$slots:{default:!0}});var u=m(x,2);Le(u,{class:"max-w-sm 2xl:max-w-md",tweenedLifewheel:r,get data(){return t(a)}});var _=m(u,2),I=b(_),s=b(I);De(s,{get reflectionStep(){return t(n)}}),y(I),y(_);var c=m(_,2);Ke(c,{get reflectionStep(){return t(n)},get lifewheel(){return t(a)},set lifewheel(i){E(a,O(i))}});var h=m(c,2),w=b(h);{var A=i=>{V(i,{variant:"roundOutline",onclick:S,"aria-label":"Show previous step",children:(p,f)=>{Ve(p,{})},$$slots:{default:!0}})};G(w,i=>{d()&&i(A)})}var T=m(w,4);V(T,{variant:"roundSolid",onclick:v,"aria-label":"Show next step",children:(i,p)=>{Xe(i,{})},$$slots:{default:!0}}),y(h),y(g),k(l,g),F()}function lt(l){Ye(l,{})}export{lt as component};
