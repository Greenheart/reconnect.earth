import{t as M,d as T,f as F,g as ie,j as Z}from"../chunks/Cyx8v_rd.js";import"../chunks/cSZC6TWn.js";import{ah as oe,ai as re,aj as ne,K as se,D as G,p as le,P as ce,C as fe,t as de,U as me,E as z,Q as C,R as J,G as B,W as u,T as b,g as e,f as $,V as y,a as ue,ag as ee,ak as j,$ as E}from"../chunks/C-jGVfF6.js";import{i as D,c as pe}from"../chunks/BOhlj4lP.js";import{p as ve,a as O}from"../chunks/C0p6U7BJ.js";import{i as P,c as xe,o as we,f as he,a as _e,b as ge,T as be,d as ye,B as U,L as Se,X as ke,A as Ee,r as Le,e as Ie,g as Ae}from"../chunks/BLtLZLhn.js";import{s as X}from"../chunks/C3x1EM4y.js";import{d as te,e as ae,f as Te,L as Ne,M as je,g as Pe,r as Re,b as V,h as Ce,I as q,i as H,j as K}from"../chunks/Dee7SkOu.js";import{b as W}from"../chunks/UmRejN9p.js";import{g as Q}from"../chunks/DURsVhdH.js";import{b as Y}from"../chunks/Dk36nY-q.js";function Me(c,t,i){G&&le();var s=c,o=me,r,m=oe()?re:ne;se(()=>{m(o,o=t())&&(r&&ce(r),r=fe(()=>i(s)))}),G&&(s=de)}var Oe=M('<h2><!> </h2> <p class="whitespace-pre-wrap pt-2 text-sm 2xs:text-base xs:text-lg"> </p>',1);function Ue(c,t){z(t,!0);var i=Oe(),s=C(i),o=b(s);Me(o,()=>t.reflectionStep,v=>{var k=F(),_=C(k);{var x=p=>{var g=F();const L=$(()=>Ne[t.reflectionStep.i]);var n=C(g);pe(n,()=>e(L),(f,w)=>{w(f,{get class(){return`size-6 -mb-0.5 ${Te[t.reflectionStep.i].text??""}`}})}),T(p,g)};D(_,p=>{P(t.reflectionStep)&&p(x)})}T(v,k)});var r=u(o);y(s);var m=u(s,2),S=b(m,!0);y(m),J(v=>{ae(s,1,v),X(r,` ${t.reflectionStep.title??""}`),X(S,t.reflectionStep.text)},[()=>te(["flex items-center justify-center gap-2 text-lg font-normal normal-case xs:text-2xl sm:text-3xl",P(t.reflectionStep)?t.reflectionStep.colors.text:"text-emerald-400"])]),T(c,i),B()}let N=je,R=Pe,Ve=1;var We=(c,t)=>{c.key.includes("Arrow")&&t()},Xe=(c,t)=>t(),ze=M('<span></span> <div role="tooltip" id="tooltip" class="absolute left-0 top-0 hidden max-w-max rounded-md bg-black px-2 py-1.5 text-sm"> <div class="arrow absolute h-2 w-2 rotate-45 bg-black"></div></div> <input type="range" aria-describedby="tooltip"> <span></span>',1),Be=M('<div class="slider flex h-4 w-full min-w-[160px] max-w-md select-none items-center gap-4 px-4 text-lg xs:h-6 xs:text-xl"><!></div>');function De(c,t){z(t,!0);let i=ve(t,"lifewheel",15),s=j(void 0),o=j(void 0),r=j(void 0);const m=n=>(n-N)*100/(R-N),S=n=>{e(s)&&e(o)&&e(r)&&xe(e(s),e(o),{placement:"top",middleware:[we(18),he(),_e({element:e(r)})]}).then(({x:f,y:w,placement:h,middlewareData:I})=>{if(!(e(s)&&e(o)&&e(r)))return;const A=e(s).offsetWidth-32;e(o).style.transform=`translate(${f-A/2+A*m(n)/100}px, ${w}px)`;const{x:a,y:l}=I.arrow,d={top:"bottom",right:"left",bottom:"top",left:"right"}[h.split("-")[0]];Object.assign(e(r).style,{left:a!==null?`${a}px`:"",top:l!==null?`${l}px`:"",right:"",bottom:"",[d]:"-4px"})})};let v;const k=()=>{window.clearTimeout(v),e(o)&&(e(o).style.display="block"),S(i()[t.reflectionStep.i])},_=(n=400)=>{v=window.setTimeout(()=>{e(o)&&(e(o).style.display="")},n)},x=()=>{k(),_()};ue(()=>{S(i()[t.reflectionStep.i])});var p=Be();Z("keydown",ee.body,n=>{const f=document.activeElement?.className.includes("input");f&&n.key.includes("Arrow")?x():!f&&P(t.reflectionStep)&&(n.key==="ArrowDown"?(i(i()[t.reflectionStep.i]=Math.max(N,i()[t.reflectionStep.i]-1),!0),x()):n.key==="ArrowUp"&&(i(i()[t.reflectionStep.i]=Math.min(R,i()[t.reflectionStep.i]+1),!0),x()))});var g=b(p);{var L=n=>{var f=ze(),w=C(f);w.textContent=N;var h=u(w,2),I=b(h),A=u(I);W(A,d=>E(r,d),()=>e(r)),y(h),W(h,d=>E(o,d),()=>e(o));var a=u(h,2);Re(a),V(a,"min",N),V(a,"max",R),V(a,"step",Ve),a.__keydown=[We,x],a.__pointerdown=k,a.__pointerup=[Xe,_],W(a,d=>E(s,d),()=>e(s));var l=u(a,2);l.textContent=R,J(d=>{X(I,`${i()[t.reflectionStep.i]??""} `),ae(a,1,te(["input-slider h-4 min-w-[160px] flex-1 cursor-ew-resize touch-pan-x rounded-full bg-stone-800 bg-gradient-to-br bg-no-repeat shadow-sm",t.reflectionStep.colors.from,t.reflectionStep.colors.to])),Ce(a,d)},[()=>`background-size: ${m(i()[t.reflectionStep.i])}% 100%`]),ge(a,()=>i()[t.reflectionStep.i],d=>i(i()[t.reflectionStep.i]=d,!0)),T(n,f)};D(g,n=>{P(t.reflectionStep)&&n(L)})}y(p),T(c,p),B()}ie(["keydown","pointerdown","pointerup"]);var Fe=M('<div class="max-h-[calc(100vh-4rem)] mx-auto grid max-w-screen-md grid-rows-[min-content_1fr_min-content_min-content] justify-items-center gap-4 sm:gap-8"><!> <!> <div class="flex max-w-lg flex-grow flex-col items-center justify-end px-4"><div class="h-40 2xs:h-48 xs:h-52"><!></div></div> <!> <div class="flex w-full min-w-[160px] max-w-md justify-between px-4 pb-4"><!> <div class="flex-grow"></div> <!></div></div>');function Ge(c,t){z(t,!0);let i=j(O(q));const s=be.of(()=>q,{duration:400,easing:ye});let o=j(0),r=$(()=>H[e(o)]);const m=()=>e(o)>=1,S=()=>{m()&&E(o,e(o)-1)},v=async()=>{e(o)===H.length-1?(Le.add(Ie(e(i))),await Q(Y)):(E(o,e(o)+1),P(e(r))&&e(i)[e(r).i]===0&&E(i,O(e(i).map((a,l)=>l===e(r).i?K:a))))};async function k(){const a=e(i).some(l=>l>0&&l!==K);(!a||a&&confirm("Are you sure you want to abort this reflection and lose your progress?"))&&await Q(Y)}var _=Fe();Z("keyup",ee.body,a=>{document.activeElement?.className?.includes("input-slider")||(a.key==="ArrowLeft"?m()&&S():a.key==="ArrowRight"&&v())});var x=b(_);U(x,{onclick:k,"aria-label":"Abort reflection and go back to main menu",class:"!h-12 !w-12 !border-emerald-400/5 absolute top-4 right-4",variant:"roundGhost",children:(a,l)=>{ke(a,{})},$$slots:{default:!0}});var p=u(x,2);Se(p,{class:"max-w-sm 2xl:max-w-md",tweenedLifewheel:s,get data(){return e(i)}});var g=u(p,2),L=b(g),n=b(L);Ue(n,{get reflectionStep(){return e(r)}}),y(L),y(g);var f=u(g,2);De(f,{get reflectionStep(){return e(r)},get lifewheel(){return e(i)},set lifewheel(a){E(i,O(a))}});var w=u(f,2),h=b(w);{var I=a=>{U(a,{variant:"roundOutline",onclick:S,"aria-label":"Show previous step",children:(l,d)=>{Ae(l,{})},$$slots:{default:!0}})};D(h,a=>{m()&&a(I)})}var A=u(h,4);U(A,{variant:"roundSolid",onclick:v,"aria-label":"Show next step",children:(a,l)=>{Ee(a,{})},$$slots:{default:!0}}),y(w),y(_),T(c,_),B()}function it(c){Ge(c,{})}export{it as component};
