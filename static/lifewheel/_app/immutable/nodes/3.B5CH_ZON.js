import{t as V,d as I,f as q,g as te,j as Y,k as G}from"../chunks/C2rru2Tf.js";import"../chunks/CDpX04tE.js";import{ah as ae,ai as ie,aj as ne,K as oe,D as H,p as re,P as se,C as le,t as ce,U as fe,E as D,Q as O,R as Z,G as F,W as v,T as S,g as e,f as de,V as k,a as me,ag as J,ak as N,$ as x,al as X}from"../chunks/CB7aXofe.js";import{i as U,c as pe}from"../chunks/D5WaSkbu.js";import{p as ue,a as u}from"../chunks/HLNDA4gF.js";import{i as C,c as xe,o as ve,f as we,a as _e,b as he,T as ge,d as be,L as ye,B as K,r as Se,e as ke}from"../chunks/yST-_wwP.js";import{s as B}from"../chunks/Cvrhm683.js";import{d as $,e as ee,f as Ie,L as Ee,M as Le,g as Te,r as Ae,b as W,h as Ne,I as Q,i as P,j as je}from"../chunks/CgkQ-5wE.js";import{b as z}from"../chunks/Ci3SR2TC.js";import{g as Pe}from"../chunks/CYl2j-BJ.js";function Re(d,t,a){H&&re();var i=d,r=fe,l,c=ae()?ie:ne;oe(()=>{c(r,r=t())&&(l&&se(l),l=le(()=>a(i)))}),H&&(i=ce)}var Ce=V('<h2><!> </h2> <p class="whitespace-pre-wrap pt-2 text-sm 2xs:text-base xs:text-lg"> </p>',1);function Me(d,t){D(t,!0);var a=Ce(),i=O(a),r=S(i);Re(r,()=>t.reflectionStep,w=>{var g=q(),b=O(g);{var _=p=>{var L=q();const j=de(()=>Ee[t.reflectionStep.i]);var s=O(L);pe(s,()=>e(j),(m,h)=>{h(m,{get class(){return`size-6 -mb-0.5 ${Ie[t.reflectionStep.i].text??""}`}})}),I(p,L)};U(b,p=>{C(t.reflectionStep)&&p(_)})}I(w,g)});var l=v(r);k(i);var c=v(i,2),E=S(c,!0);k(c),Z(w=>{ee(i,1,w),B(l,` ${t.reflectionStep.title??""}`),B(E,t.reflectionStep.text)},[()=>$(["flex items-center justify-center gap-2 text-lg font-normal normal-case xs:text-2xl sm:text-3xl",C(t.reflectionStep)?t.reflectionStep.colors.text:"text-emerald-400"])]),I(d,a),F()}let R=Le,M=Te,Oe=1;var Ve=(d,t)=>{d.key.includes("Arrow")&&t()},We=(d,t)=>t(),ze=V('<span></span> <div role="tooltip" id="tooltip" class="absolute left-0 top-0 hidden max-w-max rounded-md bg-black px-2 py-1.5 text-sm"> <div class="arrow absolute h-2 w-2 rotate-45 bg-black"></div></div> <input type="range" aria-describedby="tooltip"> <span></span>',1),Be=V('<div class="slider flex h-4 w-full min-w-[160px] max-w-md select-none items-center gap-4 px-4 text-lg xs:h-6 xs:text-xl"><!></div>');function De(d,t){D(t,!0);let a=ue(t,"lifewheel",15),i=N(void 0),r=N(void 0),l=N(void 0);const c=s=>(s-R)*100/(M-R),E=s=>{e(i)&&e(r)&&e(l)&&xe(e(i),e(r),{placement:"top",middleware:[ve(18),we(),_e({element:e(l)})]}).then(({x:m,y:h,placement:y,middlewareData:A})=>{if(!(e(i)&&e(r)&&e(l)))return;const n=e(i).offsetWidth-32;e(r).style.transform=`translate(${m-n/2+n*c(s)/100}px, ${h}px)`;const{x:o,y:T}=A.arrow,f={top:"bottom",right:"left",bottom:"top",left:"right"}[y.split("-")[0]];Object.assign(e(l).style,{left:o!==null?`${o}px`:"",top:T!==null?`${T}px`:"",right:"",bottom:"",[f]:"-4px"})})};let w;const g=()=>{window.clearTimeout(w),e(r)&&(e(r).style.display="block"),E(a()[t.reflectionStep.i])},b=(s=400)=>{w=window.setTimeout(()=>{e(r)&&(e(r).style.display="")},s)},_=()=>{g(),b()};me(()=>{E(a()[t.reflectionStep.i])});var p=Be();Y("keydown",J.body,s=>{const m=document.activeElement?.className.includes("input");m&&s.key.includes("Arrow")?_():!m&&C(t.reflectionStep)&&(s.key==="ArrowDown"?(a(a()[t.reflectionStep.i]=Math.max(R,a()[t.reflectionStep.i]-1),!0),_()):s.key==="ArrowUp"&&(a(a()[t.reflectionStep.i]=Math.min(M,a()[t.reflectionStep.i]+1),!0),_()))});var L=S(p);{var j=s=>{var m=ze(),h=O(m);h.textContent=R;var y=v(h,2),A=S(y),n=v(A);z(n,f=>x(l,f),()=>e(l)),k(y),z(y,f=>x(r,f),()=>e(r));var o=v(y,2);Ae(o),W(o,"min",R),W(o,"max",M),W(o,"step",Oe),o.__keydown=[Ve,_],o.__pointerdown=g,o.__pointerup=[We,b],z(o,f=>x(i,f),()=>e(i));var T=v(o,2);T.textContent=M,Z(f=>{B(A,`${a()[t.reflectionStep.i]??""} `),ee(o,1,$(["input-slider h-4 min-w-[160px] flex-1 cursor-ew-resize touch-pan-x rounded-full bg-stone-800 bg-gradient-to-br bg-no-repeat shadow-sm",t.reflectionStep.colors.from,t.reflectionStep.colors.to])),Ne(o,f)},[()=>`background-size: ${c(a()[t.reflectionStep.i])}% 100%`]),he(o,()=>a()[t.reflectionStep.i],f=>a(a()[t.reflectionStep.i]=f,!0)),I(s,m)};U(L,s=>{C(t.reflectionStep)&&s(j)})}k(p),I(d,p),F()}te(["keydown","pointerdown","pointerup"]);var Fe=V('<div class="max-h-[calc(100vh-4rem)] mx-auto grid max-w-screen-md grid-rows-[min-content_1fr_min-content_min-content] justify-items-center gap-4 sm:gap-8"><!> <div class="flex max-w-lg flex-grow flex-col items-center justify-end px-4"><div class="h-40 2xs:h-48 xs:h-52"><!></div></div> <!> <div class="flex w-full min-w-[160px] max-w-md justify-between px-4 pb-4"><!> <div class="flex-grow"></div> <!></div></div>');function Ue(d,t){D(t,!0);let a=N(u(Q)),i=N(u(P[0]));const r=ge.of(()=>Q,{duration:400,easing:be}),l=()=>P.findIndex(n=>n.title===e(i).title);let c=N(u(l()));const E=()=>e(c)>=1,w=()=>{x(c,u(l())),x(i,u(P[e(c)-1]))},g=async()=>{x(c,u(l())),e(c)===P.length-1?(Se.add(ke(e(a))),await Pe("/lifewheel")):(x(i,u(P[e(c)+1])),C(e(i))&&e(a)[e(i).i]===0&&x(a,u(e(a).map((n,o)=>o===e(i).i?je:n))))};var b=Fe();Y("keyup",J.body,n=>{document.activeElement?.className?.includes("input-slider")||(n.key==="ArrowLeft"?E()&&w():n.key==="ArrowRight"&&g())});var _=S(b);ye(_,{class:"max-w-sm xl:max-w-md",tweenedLifewheel:r,get data(){return e(a)}});var p=v(_,2),L=S(p),j=S(L);Me(j,{get reflectionStep(){return e(i)}}),k(L),k(p);var s=v(p,2);De(s,{get reflectionStep(){return e(i)},set reflectionStep(n){x(i,u(n))},get lifewheel(){return e(a)},set lifewheel(n){x(a,u(n))}});var m=v(s,2),h=S(m);{var y=n=>{K(n,{variant:"roundOutline",onclick:w,"aria-label":"Show previous step",children:(o,T)=>{X();var f=G("←");I(o,f)},$$slots:{default:!0}})};U(h,n=>{E()&&n(y)})}var A=v(h,4);K(A,{variant:"roundSolid",onclick:g,"aria-label":"Show next step",children:(n,o)=>{X();var T=G("→");I(n,T)},$$slots:{default:!0}}),k(m),k(b),I(d,b),F()}function et(d){Ue(d,{})}export{et as component};
